(function(){
  async function loadJSON(p){try{const r=await fetch(p,{cache:'no-store'});if(!r.ok)return null;return await r.json()}catch(e){return null}}
  function el(t,a={},c=[]){const n=document.createElement(t);for(const k in a){if(k==='class')n.className=a[k];else if(k==='html')n.innerHTML=a[k];else n.setAttribute(k,a[k]);} (Array.isArray(c)?c:[c]).filter(Boolean).forEach(x=>n.appendChild(x)); return n;}
  (async()=>{const d=await loadJSON('/content/header.json');const m=document.querySelector('#site-header');if(!d||!m)return; const nav=el('nav',{class:'site-nav-wrap'}); const brand=el('div',{class:'brand',html:d.brand||''}); const links=el('div',{class:'links'}); (d.links||[]).forEach(L=>{const a=el('a',{href:L.href||'#'}, L.label||'Link'); if(L.external)a.setAttribute('target','_blank'); links.appendChild(a)}); nav.appendChild(brand); nav.appendChild(links); m.innerHTML=''; m.appendChild(nav)})();
  (async()=>{const d=await loadJSON('/content/footer.json');const m=document.querySelector('#site-footer');if(!d||!m)return; const w=el('div',{class:'footer-wrap'}); const left=el('div',{class:'left',html:d.copyright||''}); const mid=el('nav',{class:'footer-links'}); (d.links||[]).forEach(L=>mid.appendChild(el('a',{href:L.href||'#'},L.label||'Link'))); const right=el('div',{class:'right'}); if(d.email)right.appendChild(el('a',{href:`mailto:${d.email}`},d.email)); if(d.phone){right.appendChild(document.createTextNode(' Â· ')); right.appendChild(el('a',{href:`tel:${d.phone}`},d.phone));} w.appendChild(left); w.appendChild(mid); w.appendChild(right); m.innerHTML=''; m.appendChild(w)})();
  (async()=>{const d=await loadJSON('/content/home.json');const m=document.querySelector('#home-hero');if(!d||!m)return; const s=el('section',{class:'hero'}); s.appendChild(el('h1',{html:d.headline||''})); s.appendChild(el('p',{class:'sub',html:d.subheadline||''})); const b=el('div',{class:'btns'}); if(d.primaryCta)b.appendChild(el('a',{href:d.primaryCta.href||'#',class:'btn primary'},d.primaryCta.label||'Learn more')); if(d.secondaryCta)b.appendChild(el('a',{href:d.secondaryCta.href||'#',class:'btn secondary'},d.secondaryCta.label||'Secondary')); s.appendChild(b); m.innerHTML=''; m.appendChild(s)})();
  (async()=>{const d=await loadJSON('/content/services.json');const m=document.querySelector('#services-tiles');if(!d||!m)return; const g=el('div',{class:'tiles'}); (d.tiles||[]).forEach(t=>{const card=el('a',{class:'tile',href:t.href||'#'}); if(t.img)card.appendChild(el('img',{src:t.img,alt:t.title||''})); card.appendChild(el('h3',{html:t.title||''})); card.appendChild(el('p',{html:t.desc||''})); g.appendChild(card)}); m.innerHTML=''; m.appendChild(g)})();
  (async()=>{const d=await loadJSON('/content/testimonials.json');const m=document.querySelector('#testimonials');if(!d||!m)return; const list=el('div',{class:'testimonials-list'}); (d.items||[]).forEach(it=>{const c=el('div',{class:'testi'}); if(it.photo)c.appendChild(el('img',{src:it.photo,alt:it.name||''})); c.appendChild(el('blockquote',{html:it.quote||''})); c.appendChild(el('div',{class:'name',html:it.name||''})); if(it.link)c.appendChild(el('a',{href:it.link},'View')); list.appendChild(c)}); m.innerHTML=''; m.appendChild(list)})();
})();